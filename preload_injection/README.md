# preload_injection

Этот скрипт демонстрирует технику внедрения динамически подключаемой библиотеки с использованием переменной окружения `LD_PRELOAD`, а также модификацию конфигурационного файла оболочки для постоянного эффекта.

MITRE ATT&CK —
T1546.004 Unix Shell Configuration Modification
T1546.006 LD_PRELOAD

## Что делает скрипт

1. Проверяет, что скрипт запущен от root.
2. Создаёт скрытую директорию `/etc/.hidden`.
3. Копирует библиотеку `preload.so` из директории `assets` в `/etc/.hidden`.
4. Устанавливает переменную окружения `LD_PRELOAD`, указывающую на скопированную библиотеку.
5. Добавляет строку `export LD_PRELOAD=/etc/.hidden/preload.so` в конец файла `/etc/profile` для обеспечения постоянного действия после перезапуска оболочки.
6. Выполняет команду `id` для подтверждения успешного выполнения скрипта.

## Сборка

Команда для сборки:

go build -o preload_injection ./main.go

## Запуск

Команда для запуска:

sudo ./preload_injection

## Требования

1. Golang версии 1.20 или выше.
2. Запуск от имени суперпользователя (root).
3. Наличие библиотеки `preload.so` в директории `assets`.
